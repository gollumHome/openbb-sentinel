name: ğŸŒ™ Run Post-Market Review

on:
  # ç¾è‚¡æ”¶ç›˜æ˜¯åŒ—äº¬æ—¶é—´æ¬¡æ—¥å‡Œæ™¨ 04:00 (å†¬ä»¤æ—¶ 05:00)
  # æˆ‘ä»¬å¯ä»¥è®¾åœ¨ UTC 21:30 (åŒ—äº¬æ—¶é—´ 05:30)ï¼Œç¡®ä¿æ”¶ç›˜æ•°æ®å·²æ›´æ–°
  schedule:
    - cron: '0 1 * * 2-6'

  workflow_dispatch:

jobs:
  run-analysis:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: Run Sentinel (Post-Market)
      env:
        GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
        WECHAT_WEBHOOK_URL: ${{ secrets.WECHAT_WEBHOOK_URL }}
        FMP_KEY: ${{ secrets.FMP_KEY }}
        TIINGO_KEY: ${{ secrets.TIINGO_KEY }}
      run: |
        # è¿è¡Œ main.py å¹¶ä¼ å…¥å‚æ•° post
        python main.py post
